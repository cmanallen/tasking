{% extends 'base.html' %}

{% block article %}
	<!-- Task Heading -->
	<a href="{% url "update-task" pk=task.id %}" class="ftrt">
		<button type="button" class="btn btn-primary">Update Task</button>
	</a>
	<h2>{{ task.name }}</h2>
	<p>Created by <b>{{ task.created_by }}</b> on <i>{{ task.created }}</i></p>
	<!-- Descriptions -->
	<hr />
	<p class="serif mb20">{{ task.description|safe }}</p>
	<!-- Attachments -->
	<hr />
	<a href="#">
		<button class="btn btn-success">Attach Files</button>
	</a>
	{% if attachments %}
		{% for attachment in attachments %}
			{{ attachment }}
		{% endfor %}
	{% endif %}
{% endblock %}

{% block aside %}
	{% if comments %}
	<!-- List Comments -->
	<ul class="list-unstyled">
		{% for comment in comments %}
			{% if comment.user.id == user.id %}
			<li class="autoflow mb20">
				<figure class="ftlt">
					<a href="/users/{{ comment.user.id }}"><img src="{{ comment.user.avatar.url }}" alt="user" class="avatar" /></a>
				</figure>
				<div class="bubble-user">{{ comment.body }}</div>
				<span class="ftrt verysmall subtext">{{ comment.created }}</span>
			</li>
			{% else %}
			<li class="autoflow mb20">
				<figure class="ftrt">
					<a href="/users/{{ comment.user.id }}"><img src="/media/images/smiling-dog.jpg" alt="user" class="avatar" /></a>
				</figure>
				<div class="bubble-other">{{ comment.body }}</div>
				<span class="verysmall subtext">{{ comment.created }}</span>
			</li>
			{% endif %}
		{% endfor %}
	</ul>
	{% else %}
	<p>There doesn't seem to be anything here! Change that my writing a comment!</p>
	{% endif %}
	<!-- Add Comment -->
	<form action="{% url 'create-task-comment' %}" method="POST" enctype="multipart/form-data">
		{% csrf_token %}
		<input type="hidden" name="task" value="{{ task.id }}">
		<textarea name="body" class="fluid mt10"></textarea>
		<button type="submit" class="btn btn-primary mt10 mb10">Add Comment</button>
	</form>
{% endblock %}
